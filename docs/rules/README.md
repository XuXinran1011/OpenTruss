# 规则引擎文档

本文档目录包含 OpenTruss 规则引擎的完整文档，包括架构设计、开发指南和配置说明。

## 文档列表

- [规则引擎架构与开发指南](./RULE_ENGINE.md) - 规则引擎的完整架构设计和开发指南
- [规则配置示例](./RULE_CONFIG_EXAMPLES.md) - 规则配置文件示例和说明

## 快速导航

### 规则引擎概述

OpenTruss 规则引擎是一个**轻量、可扩展、前后端协同的校验体系**，确保 **"垃圾进，精华出"**。

### 核心功能

规则引擎包含四个开发阶段（Phase）：

1. **规则引擎 Phase 1：语义"防呆"**
   - 防止违反常识的连接（如：水管接柱子）
   - 使用语义连接白名单机制
   - 配置文件：`semantic_allowlist.json`

2. **规则引擎 Phase 2：构造"规范化"**
   - 角度吸附、Z轴完整性检查
   - 构造标准验证
   - 配置文件：`fitting_standards.json`

3. **规则引擎 Phase 3：空间"避障"**
   - 物理碰撞检测（2.5D 包围盒）
   - 空间冲突检测

4. **规则引擎 Phase 4：拓扑"完整性"**
   - 确保系统逻辑闭环
   - 无悬空端点、无孤立子图

### 配置文件位置

所有规则引擎配置文件位于：

```
backend/app/config/rules/
  ├── semantic_allowlist.json      # 语义规则配置（规则引擎 Phase 1）
  ├── fitting_standards.json        # 构造标准配置（规则引擎 Phase 2）
  └── version.json                  # 配置版本信息（可选）
```

### 前后端分层防御策略

OpenTruss 采用**分层防御策略**：

- **前端 (UX Layer)**: 软引导，实时反馈，预防错误
- **后端 (Data Layer)**: 硬阻断，严格校验，数据完整性保障

详细说明请参考 [规则引擎架构与开发指南](./RULE_ENGINE.md)。

---

**最后更新**：2025-12-28  
**文档版本**：1.0  
**维护者**：OpenTruss 开发团队
